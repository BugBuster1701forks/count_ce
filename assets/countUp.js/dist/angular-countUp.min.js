!function(a){"use strict";var t=a.module("countUpModule",[]);t.directive("countUp",["$filter",function(a){return{restrict:"A",link:function(t,n,e){function i(t,e,i,r){for(var o=0,l=["webkit","moz","ms","o"],s=0;s<l.length&&!window.requestAnimationFrame;++s)window.requestAnimationFrame=window[l[s]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[l[s]+"CancelAnimationFrame"]||window[l[s]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var t=(new Date).getTime(),n=Math.max(0,16-(t-o)),e=window.setTimeout(function(){a(t+n)},n);return o=t+n,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)}),this.d=n[0],this.startVal=t,this.endVal=e,this.countDown=this.startVal>this.endVal,this.frameVal=this.startVal,this.duration=1e3*r||2e3,this.decimals=Math.max(0,i||0),this.dec=Math.pow(10,this.decimals);var u=this;this.printValue=function(t){console.log(t);var n=a("number")(t,i);console.log(n),this.d.innerHTML=n},this.easeOutExpo=function(a,t,n,e){return n*(-Math.pow(2,-10*a/e)+1)*1024/1023+t},this.count=function(a){u.startTime||(u.startTime=a),u.timestamp=a;var t=a-u.startTime;u.remaining=u.duration-t,u.frameVal=u.countDown?u.startVal-u.easeOutExpo(t,0,u.startVal-u.endVal,u.duration):u.easeOutExpo(t,u.startVal,u.endVal-u.startVal,u.duration),u.frameVal=u.countDown?u.frameVal<u.endVal?u.endVal:u.frameVal:u.frameVal>u.endVal?u.endVal:u.frameVal,u.frameVal=Math.round(u.frameVal*u.dec)/u.dec,u.printValue(u.frameVal),t<u.duration?u.rAF=requestAnimationFrame(u.count):u.callback&&u.callback()},this.start=function(a){return u.callback=a,isNaN(u.endVal)||isNaN(u.startVal)||u.startVal===u.endVal?this.d.innerHTML=e:u.rAF=requestAnimationFrame(u.count),!1},this.reset=function(){u.paused=!1,delete u.startTime,u.startVal=t,cancelAnimationFrame(u.rAF),u.printValue(u.startVal)},this.update=function(a){delete u.callback,cancelAnimationFrame(u.rAF),u.paused=!1,delete u.startTime,u.startVal=u.frameVal,u.endVal=Number(a),u.countDown=u.startVal>u.endVal,u.rAF=requestAnimationFrame(u.count)},u.printValue(u.startVal)}function r(){m.reset(),l>9999?m.start(function(){m.update(l)}):m.start()}var o=e.startVal||0;isNaN(o)&&(o=Number(o.match(/[\d\-\.]+/g).join("")));var l=e.endVal||0;isNaN(l)&&(l=Number(l.match(/[\d\-\.]+/g).join("")));var s=Number(e.duration)||2.5,u=Number(e.decimals)||0,m=new i(o,l,u,s);l>9999&&(m=new i(o,l-100,u,s/2)),e.scrollSpyEvent?t.$on(e.scrollSpyEvent,function(a,t){t===e.id&&r()}):r(),n.on("click",function(){r()})}}}])}(angular);